"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[631],{87631:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",[t("editor",{ref:"editor",attrs:{"image-props":e.images},on:{"update:imageProps":function(t){e.images=t},"update:image-props":function(t){e.images=t}}}),t("button",{on:{click:e.remove}},[e._v("remove")])],1)},a=[],i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"editor"}},[t("v-stage",{ref:"stageArea",attrs:{config:{width:600,height:600}},on:{mousedown:e.handleStageMouseDown}},[t("v-layer",[t("v-group",{ref:"imageGroup"},e._l(Object.values(e.images),(function(e){return t("v-image",{key:e.id,attrs:{config:e}})})),1),t("v-transformer",{ref:"transformer"})],1)],1)],1)},o=[],n={props:{imageProps:Array},data(){return{images:{},selectedNode:null,imageGroup:null,transformer:null,stageArea:null}},watch:{imageProps(){this.registerImages()}},mounted(){this.transformer=this.$refs.transformer.getStage(),this.imageGroup=this.$refs.imageGroup.getStage(),this.stageArea=this.$refs.stageArea.getStage(),this.registerImages()},methods:{handleStageMouseDown(e){if(e.target===e.target.getStage())return this.selectedImageName="",this.selectedNode=null,void this.updateTransformer();const t="Transformer"===e.target.getParent().className;if(t)return;const s=e.target.name(),r=Object.values(this.images).find((e=>e.name===s));r&&(this.selectedImageName=s,this.selectedNode=this.imageGroup.find(".".concat(this.selectedImageName))[0],this.selectedNode.moveToTop()),this.updateTransformer()},updateTransformer(){const e=this.transformer;if(this.cropMode)e.detach();else{if(this.selectedNode===e.node())return;this.selectedNode?(this.selectedNode.moveToTop(),e.attachTo(this.selectedNode)):e.detach()}e.getLayer().batchDraw()},registerImages(){this.imageProps.forEach((e=>{if(!this.images[e]){let t=new Image;t.src=e,t.onload=()=>{this.$set(this.images,e,{id:e,image:t,draggable:!0,name:e,x:0,y:0})}}}))},removeSelectedImage(){let e=this.imageProps.filter((e=>e!==this.selectedImageName));this.$emit("update:image-props",e),this.$delete(this.images,this.selectedImageName),this.selectedNode=null,this.updateTransformer()}}},m=n,g=s(1001),d=(0,g.Z)(m,i,o,!1,null,null,null),l=d.exports;window.innerWidth,window.innerHeight;var h={components:{Editor:l},data(){return{images:["https://picsum.photos/200/300?image=0","https://picsum.photos/200/300?image=1","https://picsum.photos/200/300?image=3"]}},methods:{remove(){this.$refs.editor.removeSelectedImage()}}},u=h,c=(0,g.Z)(u,r,a,!1,null,null,null),p=c.exports}}]);
//# sourceMappingURL=631.d712c00c.js.map